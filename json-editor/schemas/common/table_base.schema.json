{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://liturgicalbooks/schemas/common/table_base.schema.json",
  "title": "Common table + placeholders",
  "type": "array",
  "items": {
    "oneOf": [
      {
        "type": "object",
        "title": "Link placeholder",
        "properties": {
          "link": { "type": "string" },
          "passToTable": {
            "type": "object",
            "properties": {
              "dayOfTheWeek": {
                "anyOf": [
                  { "type": "string" },
                  { "type": "array", "items": { "type": "string" } }
                ]
              }
            },
            "required": [],
            "additionalProperties": true
          }
        },
        "required": ["link"],
        "additionalProperties": false
      },
      {
        "type": "object",
        "title": "Repeated prayer (placement)",
        "properties": {
          "repeated_prayer_placement": { "type": "string" },
          "source": { "type": "string" },
          "category": { "type": "string" },
          "passToTable": {
            "type": "object",
            "properties": {
              "dayOfTheWeek": {
                "anyOf": [
                  { "type": "string" },
                  { "type": "array", "items": { "type": "string" } }
                ]
              }
            },
            "required": [],
            "additionalProperties": true
          }
        },
        "required": ["repeated_prayer_placement", "source", "category"],
        "additionalProperties": true
      },
      {
        "type": "object",
        "title": "Repeated prayer (title)",
        "properties": {
          "repeated_prayer_title": { "type": "string" },
          "source": { "type": "string" },
          "category": { "type": "string" },
          "repeated_prayer_variables": {
            "type": "object",
            "properties": {
              "season": { "type": "string" },
              "passToTable": {
                "type": "object",
                "properties": {
                  "dayOfTheWeek": {
                    "anyOf": [
                      { "type": "string" },
                      { "type": "array", "items": { "type": "string" } }
                    ]
                  }
                },
                "required": [],
                "additionalProperties": true
              }
            },
            "required": [],
            "additionalProperties": true
          }
        },
        "required": ["repeated_prayer_title", "source", "category"],
        "additionalProperties": true
      },
      {
        "type": "object",
        "title": "Table",
        "properties": {
          "english_title": {
            "anyOf": [
              { "type": "string" },
              { "type": "null" }
            ]
          },
          "coptic_title": { "type": ["string", "null"] },
          "arabic_title": { "type": ["string", "null"] },
          "caption_class": { "type": "string" },
          "themes": { "type": "array", "items": {} },
          "seasons": { "anyOf": [ { "type": "string" }, { "type": "array", "items": {} } ] },
          "excludedSeasons": { "type": "array", "items": {} },
          "placement": { "type": "array", "items": { "type": "string" } },
          "saints": { "type": "array", "items": {} },
          "service": {
            "anyOf": [
              { "type": "string" },
              { "type": "array", "items": { "type": "string" } }
            ]
          },
          "table_class": { "type": "string" },
          "dayOfTheWeek": { "type": "string" },
          "weekdayWeekend": { "type": "string" },
          "postFirstCanticleNonSunday": { "type": "boolean" },
          "theotokiasIndex": { "type": "boolean" },
          "defaultVisibility": { "type": "boolean" },
          "category": { "type": "string" },
          "aktonkAki": { "type": "string" },
          "explanation_button": { "type": "string" },
          "image_button": { "type": "string" },
          "title": { "type": "string" },
          "nonTraditionalPascha": { "type": "boolean" },
          "tbodies": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "properties": {
                "rows": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "type": "object",
                    "properties": {
                      "row-class": {
                        "type": "string",
                        "enum": [
                          "Intro",
                          "Refrain",
                          "commentary",
                          "congregation",
                          "intro",
                          "navigationButton",
                          "navigationLink",
                          "north",
                          "priest",
                          "refrain",
                          "silent-prayer",
                          "south",
                          "text"
                        ]
                      },
                      "cells": {
                        "type": "array",
                        "minItems": 1,
                        "items": {
                          "type": "object",
                          "properties": {
                          "english": { "type": "string" },
                          "coptic": { "type": "string" },
                          "arabic": { "type": "string" },
                          "enPhonics": { "type": "string" },
                          "arPhonics": { "type": "string" },
                          "englishLink": { "type": "string" },
                          "arabicLink": { "type": "string" }
                        },
                        "anyOf": [
                          { "required": ["english"] },
                          { "required": ["arabic"] },
                          { "required": ["coptic"] },
                          { "required": ["enPhonics"] },
                          { "required": ["arPhonics"] },
                          { "required": ["englishLink"] },
                          { "required": ["arabicLink"] }
                        ],
                        "additionalProperties": true
                      }
                    },
                      "data-navigation": {
                        "type": "object",
                        "properties": {
                          "destination": { "type": "string" },
                          "source": { "type": "string" }
                        },
                        "required": [],
                        "additionalProperties": true
                      }
                    },
                    "required": ["row-class", "cells"],
                    "additionalProperties": true
                  }
                }
              },
              "required": ["rows"],
              "additionalProperties": true
            }
          }
        },
        "required": ["english_title", "tbodies"],
        "additionalProperties": true
      }
    ]
  }
}
